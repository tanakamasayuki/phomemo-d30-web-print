<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title data-i18n="app.title">Label Layout Builder</title>
	<link rel="icon" href="./favicon.svg" type="image/svg+xml" />
	<link rel="stylesheet" href="./index.css" />
</head>

<body>
	<div class="app">
		<header class="hero">
			<div>
				<p class="eyebrow">Phomemo D30</p>
				<h1 data-i18n="hero.title">Web Bluetooth Print</h1>
			</div>
			<div class="language-switch">
				<label for="languageSelect" class="field-label" data-i18n="language.title">Language</label>
				<select id="languageSelect" class="field-input">
					<option value="" selected data-i18n="language.auto">Auto (Browser)</option>
					<option value="en" data-i18n="language.english">English</option>
					<option value="ja" data-i18n="language.japanese">Japanese</option>
					<option value="zh" data-i18n="language.chinese">Chinese</option>
					<option value="de" data-i18n="language.german">German</option>
					<option value="fr" data-i18n="language.french">French</option>
					<option value="es" data-i18n="language.spanish">Spanish</option>
				</select>
			</div>
		</header>

		<main class="main">
			<section class="controls">
				<div class="card">
					<h2 data-i18n="layout.title">Layout</h2>
					<label for="layoutSelect" class="field-label" data-i18n="layout.choose">Choose layout</label>
					<select id="layoutSelect" class="field-input">
						<option value="text" selected data-i18n="layout.text">Text</option>
						<option value="image" data-i18n="layout.imageText">Image + Text</option>
						<option value="barcode" data-i18n="layout.barcodeText">Barcode + Text</option>
						<option value="qr-text" data-i18n="layout.qrText">QR Code + Text</option>
					</select>
				</div>

				<div class="card layout-fields" data-layout="text">
					<h3 data-i18n="text.title">Text settings</h3>
					<label for="textInput" class="field-label" data-i18n="text.label">Text</label>
					<textarea id="textInput" class="field-input" rows="3">Phomemo D30</textarea>
					<label for="textFont" class="field-label" data-i18n="common.font">Font</label>
					<select id="textFont" class="field-input">
						<option value="'Noto Sans JP', sans-serif" style="font-family: 'Noto Sans JP', sans-serif;">Noto
							Sans JP</option>
						<option value="'M PLUS 1p', sans-serif" style="font-family: 'M PLUS 1p', sans-serif;">M PLUS 1p
						</option>
						<option value="'Montserrat', sans-serif" style="font-family: 'Montserrat', sans-serif;">
							Montserrat</option>
						<option value="'Merriweather', serif" style="font-family: 'Merriweather', serif;">Merriweather
						</option>
						<option value="'Roboto Mono', monospace" style="font-family: 'Roboto Mono', monospace;">Roboto
							Mono</option>
						<option value="sans-serif" style="font-family: sans-serif;">System Sans</option>
					</select>
					<label for="textSize" class="field-label" data-i18n="common.fontSize">Font size (px)</label>
					<input id="textSize" class="field-input" type="number" value="48" min="1" />
					<div class="toggle-row">
						<label class="toggle">
							<input type="checkbox" id="textBold" />
							<span data-i18n="common.bold">Bold</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="textItalic" />
							<span data-i18n="common.italic">Italic</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="textUnderline" />
							<span data-i18n="common.underline">Underline</span>
						</label>
					</div>
					<label for="textAlign" class="field-label" data-i18n="common.alignment">Alignment</label>
					<select id="textAlign" class="field-input">
						<option value="center" selected data-i18n="common.alignCenter">Center</option>
						<option value="left" data-i18n="common.alignLeft">Left</option>
						<option value="right" data-i18n="common.alignRight">Right</option>
					</select>
				</div>

				<div class="card layout-fields" data-layout="barcode" hidden>
					<h3 data-i18n="barcode.title">Barcode + Text settings</h3>
					<label for="barcodeFormat" class="field-label" data-i18n="barcode.type">Barcode type</label>
					<select id="barcodeFormat" class="field-input">
						<option value="CODE128" selected data-i18n="barcode.type.code128">CODE128</option>
						<option value="CODE39" data-i18n="barcode.type.code39">CODE39</option>
						<option value="EAN13" data-i18n="barcode.type.ean13">EAN-13(JAN-13)</option>
						<option value="EAN8" data-i18n="barcode.type.ean8">EAN-8(JAN-8)</option>
						<option value="UPC" data-i18n="barcode.type.upc">UPC</option>
					</select>
					<label for="barcodeInput" class="field-label" data-i18n="barcode.value">Barcode value</label>
					<input id="barcodeInput" class="field-input" type="text" value="123456" />
					<p class="status error" id="barcodeError" aria-live="polite" hidden></p>
					<label class="toggle">
						<input type="checkbox" id="barcodeShowValue" checked />
						<span data-i18n="barcode.showValue">Show barcode value</span>
					</label>
					<label for="barcodeTextInput" class="field-label" data-i18n="common.textOptional">Text
						(optional)</label>
					<textarea id="barcodeTextInput" class="field-input" rows="2"></textarea>
					<label for="barcodeTextFont" class="field-label" data-i18n="common.font">Font</label>
					<select id="barcodeTextFont" class="field-input">
						<option value="'Noto Sans JP', sans-serif" style="font-family: 'Noto Sans JP', sans-serif;">Noto
							Sans JP</option>
						<option value="'M PLUS 1p', sans-serif" style="font-family: 'M PLUS 1p', sans-serif;">M PLUS 1p
						</option>
						<option value="'Montserrat', sans-serif" style="font-family: 'Montserrat', sans-serif;">
							Montserrat</option>
						<option value="'Merriweather', serif" style="font-family: 'Merriweather', serif;">Merriweather
						</option>
						<option value="'Roboto Mono', monospace" style="font-family: 'Roboto Mono', monospace;">Roboto
							Mono</option>
						<option value="sans-serif" style="font-family: sans-serif;">System Sans</option>
					</select>
					<label for="barcodeTextSize" class="field-label" data-i18n="common.fontSize">Font size (px)</label>
					<input id="barcodeTextSize" class="field-input" type="number" value="24" min="1" />
					<div class="toggle-row">
						<label class="toggle">
							<input type="checkbox" id="barcodeTextBold" checked />
							<span data-i18n="common.bold">Bold</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="barcodeTextItalic" />
							<span data-i18n="common.italic">Italic</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="barcodeTextUnderline" />
							<span data-i18n="common.underline">Underline</span>
						</label>
					</div>
					<label for="barcodeTextAlign" class="field-label" data-i18n="common.alignment">Alignment</label>
					<select id="barcodeTextAlign" class="field-input">
						<option value="center" selected data-i18n="common.alignCenter">Center</option>
						<option value="left" data-i18n="common.alignLeft">Left</option>
						<option value="right" data-i18n="common.alignRight">Right</option>
					</select>
				</div>

				<div class="card layout-fields" data-layout="image" hidden>
					<h3 data-i18n="image.title">Image + Text settings</h3>
					<label for="imageInput" class="field-label" data-i18n="image.file">Image file</label>
					<input id="imageInput" class="field-input" type="file" accept="image/*" />
					<label for="imageTextInput" class="field-label" data-i18n="common.textOptional">Text
						(optional)</label>
					<textarea id="imageTextInput" class="field-input" rows="2"></textarea>
					<label for="imageTextFont" class="field-label" data-i18n="common.font">Font</label>
					<select id="imageTextFont" class="field-input">
						<option value="'Noto Sans JP', sans-serif" style="font-family: 'Noto Sans JP', sans-serif;">Noto
							Sans JP</option>
						<option value="'M PLUS 1p', sans-serif" style="font-family: 'M PLUS 1p', sans-serif;">M PLUS 1p
						</option>
						<option value="'Montserrat', sans-serif" style="font-family: 'Montserrat', sans-serif;">
							Montserrat</option>
						<option value="'Merriweather', serif" style="font-family: 'Merriweather', serif;">Merriweather
						</option>
						<option value="'Roboto Mono', monospace" style="font-family: 'Roboto Mono', monospace;">Roboto
							Mono</option>
						<option value="sans-serif" style="font-family: sans-serif;">System Sans</option>
					</select>
					<label for="imageTextSize" class="field-label" data-i18n="common.fontSize">Font size (px)</label>
					<input id="imageTextSize" class="field-input" type="number" value="24" min="1" />
					<div class="toggle-row">
						<label class="toggle">
							<input type="checkbox" id="imageTextBold" checked />
							<span data-i18n="common.bold">Bold</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="imageTextItalic" />
							<span data-i18n="common.italic">Italic</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="imageTextUnderline" />
							<span data-i18n="common.underline">Underline</span>
						</label>
					</div>
					<label for="imageTextAlign" class="field-label" data-i18n="common.alignment">Alignment</label>
					<select id="imageTextAlign" class="field-input">
						<option value="center" selected data-i18n="common.alignCenter">Center</option>
						<option value="left" data-i18n="common.alignLeft">Left</option>
						<option value="right" data-i18n="common.alignRight">Right</option>
					</select>
				</div>

				<div class="card layout-fields" data-layout="qr-text" hidden>
					<h3 data-i18n="qr.title">QR Code + Text settings</h3>
					<label for="qrTextData" class="field-label" data-i18n="qr.data">QR code data</label>
					<input id="qrTextData" class="field-input" type="text" value="https://example.com" />
					<label for="qrTextInput" class="field-label" data-i18n="text.label">Text</label>
					<textarea id="qrTextInput" class="field-input" rows="2">Hello QR</textarea>
					<label for="qrTextFont" class="field-label" data-i18n="common.font">Font</label>
					<select id="qrTextFont" class="field-input">
						<option value="'Noto Sans JP', sans-serif" style="font-family: 'Noto Sans JP', sans-serif;">Noto
							Sans JP</option>
						<option value="'M PLUS 1p', sans-serif" style="font-family: 'M PLUS 1p', sans-serif;">M PLUS 1p
						</option>
						<option value="'Montserrat', sans-serif" style="font-family: 'Montserrat', sans-serif;">
							Montserrat</option>
						<option value="'Merriweather', serif" style="font-family: 'Merriweather', serif;">Merriweather
						</option>
						<option value="'Roboto Mono', monospace" style="font-family: 'Roboto Mono', monospace;">Roboto
							Mono</option>
						<option value="sans-serif" style="font-family: sans-serif;">System Sans</option>
					</select>
					<label for="qrTextSize" class="field-label" data-i18n="common.fontSize">Font size (px)</label>
					<input id="qrTextSize" class="field-input" type="number" value="24" min="1" />
					<div class="toggle-row">
						<label class="toggle">
							<input type="checkbox" id="qrTextBold" checked />
							<span data-i18n="common.bold">Bold</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="qrTextItalic" />
							<span data-i18n="common.italic">Italic</span>
						</label>
						<label class="toggle">
							<input type="checkbox" id="qrTextUnderline" />
							<span data-i18n="common.underline">Underline</span>
						</label>
					</div>
					<label for="qrTextAlign" class="field-label" data-i18n="common.alignment">Alignment</label>
					<select id="qrTextAlign" class="field-input">
						<option value="center" selected data-i18n="common.alignCenter">Center</option>
						<option value="left" data-i18n="common.alignLeft">Left</option>
						<option value="right" data-i18n="common.alignRight">Right</option>
					</select>
				</div>

			</section>

			<section class="preview">
				<div class="card">
					<div class="preview-header">
						<h2 data-i18n="preview.title">Preview</h2>
						<p data-i18n="preview.subtitle">Canvas is rotated to match printer orientation.</p>
					</div>
					<div class="preview-stage">
						<div class="preview-frame">
							<canvas id="previewCanvas"></canvas>
						</div>
					</div>
				</div>
				<div class="card print-card">
					<h2 data-i18n="print.title">Print</h2>
					<p class="helper" data-i18n="print.helper">Connect to the printer and send the current preview.</p>
					<label for="printCopies" class="field-label" data-i18n="print.copies">Copies</label>
					<input id="printCopies" class="field-input" type="number" value="1" min="1" />
					<p></p>
					<button type="button" class="primary-button" id="printButton" data-i18n="print.connect">
						Connect &amp; print
					</button>
					<button type="button" class="secondary-button" id="disconnectButton" data-i18n="print.disconnect"
						hidden>
						Disconnect
					</button>
					<p class="status" id="printStatus" aria-live="polite"></p>
				</div>
				<div class="card">
					<h2 data-i18n="label.title">Label size</h2>
					<label for="labelPreset" class="field-label" data-i18n="label.preset">Preset (Height x
						Width)</label>
					<select id="labelPreset" class="field-input">
						<option value="" selected data-i18n="label.choosePreset">Choose a preset</option>
						<option value="6x22">6 x 22 mm</option>
						<option value="12x40">12 x 40 mm</option>
						<option value="14x30">14 x 30 mm</option>
						<option value="14x40">14 x 40 mm</option>
					</select>
					<div class="field-row">
						<div>
							<label for="labelHeight" class="field-label" data-i18n="label.height">Height (mm)</label>
							<input id="labelHeight" class="field-input" type="number" value="12" min="1" />
						</div>
						<div>
							<label for="labelWidth" class="field-label" data-i18n="label.width">Width (mm)</label>
							<input id="labelWidth" class="field-input" type="number" value="40" min="1" />
						</div>
						<br>
						<div>
							<label for="labelMarginY" class="field-label" data-i18n="label.marginY">Margin Y
								(mm)</label>
							<input id="labelMarginY" class="field-input" type="number" value="0" min="0" />
						</div>
						<div>
							<label for="labelMarginX" class="field-label" data-i18n="label.marginX">Margin X
								(mm)</label>
							<input id="labelMarginX" class="field-input" type="number" value="2" min="0" />
						</div>
					</div>
					<div class="button-row">
						<button type="button" class="secondary-button" id="resetButton"
							data-i18n="common.reset">Reset</button>
						<button type="button" class="secondary-button" id="historyButton"
							data-i18n="history.open">History</button>
					</div>
				</div>
				<div class="card history-card" id="historyPanel" hidden>
					<div class="history-header">
						<h2 data-i18n="history.title">Print history</h2>
						<div class="history-actions">
							<input type="file" id="historyImportInput" accept="application/json" hidden />
							<button type="button" class="secondary-button" id="historySaveButton"
								data-i18n="history.save">Save preview</button>
							<button type="button" class="secondary-button" id="historyImportButton"
								data-i18n="history.import">Import JSON</button>
							<button type="button" class="secondary-button" id="historyClearButton"
								data-i18n="history.clearAll">Clear all</button>
						</div>
					</div>
					<p class="status" id="historyEmpty" data-i18n="history.empty">No history yet.</p>
					<div class="history-list" id="historyList"></div>
				</div>
			</section>
		</main>
	</div>

	<footer class="footer">
		<a href="https://github.com/tanakamasayuki/phomemo-d30-web-print" target="_blank" rel="noopener noreferrer">
			GitHub: tanakamasayuki/phomemo-d30-web-print
		</a>
	</footer>

	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Merriweather:wght@400;700&family=Roboto+Mono:wght@400;600&family=Noto+Sans+JP:wght@400;700&family=M+PLUS+1p:wght@400;700&display=swap" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
	<script type="module" src="./index.js"></script>
</body>

</html>